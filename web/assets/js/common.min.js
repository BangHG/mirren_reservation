function open_blind(){$(".blind, .blind--btnClosed").fadeIn(300)}function closed_popup(){return $(".blind, .blind--btnClosed").fadeOut(300),$(".popup--video").removeClass("open"),$(".you_tube").empty(),$(".popup").hide(),!1}function SetYoutube(){var t="",e=arguments[0];if(""==e||null==e)closed_popup(),$(".popup--video").removeClass("open"),alert("Coming soon.");else{var i=document.getElementById("cv_audio");i.pause(),t='<iframe id="video" width="900" height="576" src="'+e+'" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>',$(".you_tube").html(t)}}function navOn(){$(".header").addClass("hover"),$(".header .nav__bg").stop().fadeIn(200),$(".header .nav-list--depth2").stop().fadeIn(200)}function navOff(){$(".header").removeClass("hover"),$(".header .nav__bg").stop().fadeOut(200),$(".header .nav-list--depth2").stop().fadeOut(200)}function stigmataTab(){$(".stigmata-group").each(function(){$(this).find(".thumb-btn:nth-child(1)").addClass("active")}),$("#stigmata-tab .thumb-btn").on("click",function(){$(this).hasClass("active")||($("#stigmata-tab .thumb-btn").removeClass("active"),$(this).stop().addClass("active"))})}function getSlideIndexByClass(t,e){var i=0;return $.each($(t).find(".swiper-wrapper").children(),function(t,a){if($(a).hasClass(e))return i=t,!1}),i}function audioCv(){var t=document.getElementById("cv_audio");$(".cv-btn").on("click",function(){$(".cv-btn").removeClass("active"),t.pause();const e=$(this).attr("data-audio");$("#cv_audio").attr("src",`${$rootUrl}/common/audio/${e}.wav`),$(this).addClass("active"),t.play()}),t.addEventListener("ended",function(){t.currentTime=0,$(".cv-btn").removeClass("active")})}$(document).on("click",".popup-link",function(){var t=$(this).attr("data-popup");return open_blind(),$("."+t).fadeIn().css("display","flex"),!1}),$(document).keyup(function(t){"Escape"===t.key&&closed_popup()}),$(document).ready(function(){$("body").on("click",".popup-link--video",function(){return open_blind(),$(".popup--video").addClass("open").fadeIn("300"),SetYoutube($(this).attr("data-content")),!1})}),$(".nav__bg").each(function(){var t=0;$(".header .nav-list--depth2").each(function(){$(this).outerHeight()>t&&(t=$(this).outerHeight())}),$(this).css("height",t)}),$(".nav .nav-item--depth1 > .link").mouseenter(function(){navOn()}),$(".nav").mouseleave(function(){navOff()}),$(document).scroll(function(t){$(window).scrollTop()>500?$(".btnTop").fadeIn(300):$(".btnTop").fadeOut(300)}),$(document).ready(function(){AOS.init({once:!0})}),$(window).on("load",function(){$("body").attr("data-loading","done")}),window.addEventListener("resize",function(){setTimeout(function(){AOS.refresh()},500)}),$(".nav .nav-list a.link").on("click",function(){const t=$(this).attr("href");if(t&&t.includes("#section")){t.split("?")[0];const e=t.split("?")[1];return t&&t.includes("?media--")&&($(".section-media .tab-content").removeClass("active"),$(".section-media .tab-list .tab-link").removeClass("active"),$(`.section-media .tab-list .tab-link[data-hash=${e}]`).addClass("active"),$("#"+e).addClass("active")),!1}});const witchThumbSwiper=new Swiper(".section-witch .swiper-thumb .swiper-container",{speed:300,allowTouchMove:!1,freeMode:!0,threshold:20}),witchSwiper=new Swiper(".section-witch .swiper .swiper-container",{speed:300,spaceBetween:0,loop:!1,allowTouchMove:!1,effect:"fade",fadeEffect:{crossFade:!0}});witchSwiper.on("slideChange",function(){$(".section-witch .swiper .swiper-slide").removeClass("initAni")}),witchSwiper.on("slideChangeTransitionStart",function(){$(".section-witch .swiper .swiper-slide-active").addClass("initAni")}),$(".witch-tab .thumb-btn").on("click",function(){$(".section-witch .thumb-btn").removeClass("active");const t=$(this).attr("data-witch");witchSwiper.slideTo(getSlideIndexByClass(".section-witch","witch--"+t)),$(this).addClass("active")});const stigmataSwiper=new Swiper(".section-stigmata .swiper .swiper-container",{speed:0,spaceBetween:0,loop:!1,allowTouchMove:!1,effect:"fade",fadeEffect:{crossFade:!0}});stigmataSwiper.on("slideChange",function(){$(".section-stigmata .swiper .swiper-slide").removeClass("initAni")}),stigmataSwiper.on("slideChangeTransitionStart",function(){$(".section-stigmata .swiper .swiper-slide-active").addClass("initAni")}),$("#stigmata-tab").each(function(t){$(this).find(".tab-link").click(function(t){var e=$(this).attr("data-hash");t.preventDefault(),$(this).parent().parent().find(".tab-link").removeClass("active"),$(this).parent().parent().parent().find(".tab-content").stop().removeClass("active"),$("#stigmata-tab .thumb-btn").removeClass("active"),$("#"+e).find(".thumb-btn").first().addClass("active"),$(this).addClass("active");const i=$(this).attr("data-moveTo");return stigmataSwiper.slideTo(getSlideIndexByClass(".section-stigmata","stigmata--"+i)),$("#"+e).stop().addClass("active"),!1})}),$.ajax({type:"GET",url:`${$rootUrl}/common/json/stigmata.json`,dataType:"json"}).done(function(t){var e="",i="",a="",n="",s="",o="",c="";$.each(t.list,function(t,e){"1"===e.tribe&&(i+='<button class="thumb-btn" id="stigmata--'+e.id+'" title="'+e.name+'"><span class="spin"></span></button>'),"2"===e.tribe&&(a+='<button class="thumb-btn" id="stigmata--'+e.id+'" title="'+e.name+'"><span class="spin"></span></button>'),"3"===e.tribe&&(n+='<button class="thumb-btn" id="stigmata--'+e.id+'" title="'+e.name+'"><span class="spin"></span></button>'),"4"===e.tribe&&(s+='<button class="thumb-btn" id="stigmata--'+e.id+'" title="'+e.name+'"><span class="spin"></span></button>'),"5"===e.tribe&&(o+='<button class="thumb-btn" id="stigmata--'+e.id+'" title="'+e.name+'"><span class="spin"></span></button>'),"6"===e.tribe&&(c+='<button class="thumb-btn" id="stigmata--'+e.id+'" title="'+e.name+'"><span class="spin"></span></button>')}),$("#tabContent1 .stigmata-group").html(i),$("#tabContent2 .stigmata-group").html(a),$("#tabContent3 .stigmata-group").html(n),$("#tabContent4 .stigmata-group").html(s),$("#tabContent5 .stigmata-group").html(o),$("#tabContent6 .stigmata-group").html(c),stigmataTab(),$.each(t.list,function(t,i){e+='<div class="swiper-slide stigmata stigmata--'+i.id+'">',e+='<div class="bg"></div> <div class="ch"> </div>',e+=`<div class="spec"> <img loading="lazy" src="${$rootUrl}/web/assets/images/stigmata/`+i.id+'_spec.webp"> <p class="sr-only"> '+i.spec+"</p> </div>",e+='<div class="title-bx">',e+='<p class="name"> '+i.name+" </p>",e+='<dl class="cv"><dt>CV</dt>',e+=`<dd><img loading="lazy" src="${$rootUrl}/common/audio/`+i.id+'_ja.png" alt="'+i.cv_ja+'" /><button class="cv-btn" data-audio="'+i.id+'_ja"></button></dd>',e+="</dl>",e+='<p class="desc"> '+i.desc+" </p>",e+="</div></div>"}),$("#stigmataList").html(e),$("#stigmata-tab .thumb-btn").on("click",function(){const t=$(this).attr("id");stigmataSwiper.slideTo(getSlideIndexByClass(".section-stigmata",t))}),audioCv()});const worldSwiper=new Swiper(".section-world .swiper-container",{speed:500,spaceBetween:0,loop:!0,effect:"fade",fadeEffect:{crossFade:!0},navigation:{nextEl:".section-world .swiper-button--next",prevEl:".section-world .swiper-button--prev"}}),mediaVideoSwiper=new Swiper(".mediaSwiper--video .swiper-container",{speed:500,spaceBetween:0,loop:!1,threshold:20,effect:"coverflow",coverflowEffect:{rotate:"0",modifier:1,slideShadows:!1,depth:"0",scale:"1",scale:"0.77",stretch:"630"},pagination:{el:".mediaSwiper--video .swiper-pagination",type:"bullets",clickable:!0},navigation:{nextEl:".mediaSwiper--video .swiper-button--next",prevEl:".mediaSwiper--video .swiper-button--prev"}}),mediaPictureSwiper=new Swiper(".mediaSwiper--picture .swiper-container",{speed:500,spaceBetween:0,loop:!1,effect:"coverflow",coverflowEffect:{rotate:"0",modifier:1,slideShadows:!1,depth:"0",scale:"1",scale:"0.77",stretch:"630"},pagination:{el:".mediaSwiper--picture .swiper-pagination",type:"bullets",clickable:!0},navigation:{nextEl:".mediaSwiper--picture .swiper-button--next",prevEl:".mediaSwiper--picture .swiper-button--prev"}});$("#media-tab").each(function(t){$(this).find(".tab-link").click(function(t){var e=$(this).attr("data-hash");return t.preventDefault(),$(this).parent().parent().find(".tab-link").removeClass("active"),$(this).parent().parent().parent().find(".tab-content").removeClass("active"),$(this).addClass("active"),$("#"+e).addClass("active"),!1})});var clickEffects=[];$(document).on("click",function(t){if(!(clickEffects.length>=3)){var e=t.pageX,i=t.pageY,a=$('<div class="i-click-effect"></div>').css({left:e+"px",top:i+"px"});$("#smooth-content").append(a),clickEffects.push(a),setTimeout(function(){a.remove(),clickEffects.splice(clickEffects.indexOf(a),1)},600)}});